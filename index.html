<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°¥ì¤˜ AI - ë©”ë‰´ ì¶”ì²œ ì„œë¹„ìŠ¤</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <h1>ğŸ½ï¸ ë§ì¶¤ ë©”ë‰´ ì¶”ì²œ</h1>
        <form id="recommendationForm">
            <label for="category">ì›í•˜ëŠ” ë©”ë‰´ ì¹´í…Œê³ ë¦¬:</label>
            <select id="category" name="category" required>
                <option value="" disabled selected>ì„ íƒí•˜ì„¸ìš”</option>
                <option value="í•œì‹">í•œì‹</option>
                <option value="ì¤‘ì‹">ì¤‘ì‹</option>
                <option value="ì¼ì‹">ì¼ì‹</option>
                <option value="ì–‘ì‹">ì–‘ì‹</option>
                <option value="ë¶„ì‹">ë¶„ì‹</option>
                <option value="ê¸°íƒ€">ê¸°íƒ€</option>
            </select>

            <label for="age">ë‹¹ì‹ ì˜ ì—°ë ¹ëŒ€:</label>
            <select id="age" name="age" required>
                <option value="" disabled selected>ì„ íƒí•˜ì„¸ìš”</option>
                <option value="10s">10ëŒ€</option>
                <option value="20s">20ëŒ€</option>
                <option value="30s">30ëŒ€</option>
                <option value="40s">40ëŒ€ ì´ìƒ</option>
                </select>

            <label for="budget">ì˜ˆìƒ ì˜ˆì‚° ë²”ìœ„:</label>
            <select id="budget" name="budget" required>
                <option value="" disabled selected>ì„ íƒí•˜ì„¸ìš”</option>
                <option value="Low">ì €ì˜ˆì‚° (1ë§Œì› ì´í•˜)</option>
                <option value="Mid">ì¤‘ê°„ ì˜ˆì‚° (1ë§Œì› ~ 2ë§Œì›)</option>
                <option value="High">ê³ ì˜ˆì‚° (2ë§Œì› ì´ˆê³¼)</option>
                </select>

            <button type="submit">ë©”ë‰´ ì¶”ì²œë°›ê¸°</button>
        </form>

        <div id="resultContainer" class="result">
            </div>
    </div>

    <script>
        // ì´ ë¶€ë¶„ì„ ì¡°ì¥ë‹˜ì˜ **MAKE AI Webhook URL**ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.
        const WEBHOOK_URL = 'https://hook.eu2.make.com/e5u616gf08cfxmxzdir1aogxh7cbaw7c';
        const form = document.getElementById('recommendationForm');
        const resultContainer = document.getElementById('resultContainer');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // í¼ ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜
            const formData = {
                category: document.getElementById('category').value,
                age: document.getElementById('age').value, // ì˜ˆ: '20s'
                budget: document.getElementById('budget').value, // ì˜ˆ: 'Mid'
            };

            resultContainer.innerHTML = 'âœ¨ ì¶”ì²œ ë©”ë‰´ë¥¼ ê²€ìƒ‰ ì¤‘ì…ë‹ˆë‹¤...';

            try {
                // **FETCH API**ë¥¼ ì‚¬ìš©í•˜ì—¬ **MAKE AI Webhook**ìœ¼ë¡œ ë°ì´í„° ì „ì†¡
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST', // POST ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData), // JSON í˜•íƒœë¡œ ë°ì´í„° ì „ì†¡
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                // **MAKE AI**ì—ì„œ ì‘ë‹µë°›ì€ ë°ì´í„°ë¥¼ ì²˜ë¦¬
                const data = await response.json();

                if (data.recommendation && data.recommendation.Menu_Name) {
                    // ì„±ê³µì ìœ¼ë¡œ ì¶”ì²œë°›ì•˜ì„ ë•Œ ê²°ê³¼ ì¶œë ¥
                    resultContainer.innerHTML = `
                        <h2>âœ… ì¶”ì²œ ë©”ë‰´: <span class="highlight">${data.recommendation.Menu_Name}</span></h2>
                        <p>ì¹´í…Œê³ ë¦¬: ${data.recommendation.Category}</p>
                        <p>ê°€ê²©: **${data.recommendation.Price.toLocaleString()}ì›**</p>
                        <p>ğŸ‘ ì¶”ì²œ ëŒ€ìƒ: **${data.recommendation.Recommended_Age}**</p>
                    `;
                } else {
                    // ì¶”ì²œ ë©”ë‰´ë¥¼ ì°¾ì§€ ëª»í–ˆì„ ë•Œ
                    resultContainer.innerHTML = 'ğŸ¥² ì£„ì†¡í•©ë‹ˆë‹¤. ì¡°ê±´ì— ë§ëŠ” ë©”ë‰´ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.';
                }

            } catch (error) {
                console.error('Fetch Error:', error);
                resultContainer.innerHTML = 'ğŸš¨ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.';
            }
        });
    </script>
</body>
</html>
